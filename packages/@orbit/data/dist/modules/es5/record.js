import { isObject, isNone, merge } from '@orbit/utils';
export function cloneRecordIdentity(identity) {
    var type = identity.type,
        id = identity.id;

    return { type: type, id: id };
}
export function equalRecordIdentities(record1, record2) {
    return isNone(record1) && isNone(record2) || isObject(record1) && isObject(record2) && record1.type === record2.type && record1.id === record2.id;
}
export function mergeRecords(current, updates) {
    if (current) {
        var record = cloneRecordIdentity(current);
        ['attributes', 'keys', 'relationships'].forEach(function (grouping) {
            if (current[grouping] && updates[grouping]) {
                record[grouping] = merge({}, current[grouping], updates[grouping]);
            } else if (current[grouping]) {
                record[grouping] = merge({}, current[grouping]);
            } else if (updates[grouping]) {
                record[grouping] = merge({}, updates[grouping]);
            }
        });
        return record;
    } else {
        return updates;
    }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlY29yZC5qcyJdLCJuYW1lcyI6WyJpc09iamVjdCIsImlzTm9uZSIsIm1lcmdlIiwiY2xvbmVSZWNvcmRJZGVudGl0eSIsImlkZW50aXR5IiwidHlwZSIsImlkIiwiZXF1YWxSZWNvcmRJZGVudGl0aWVzIiwicmVjb3JkMSIsInJlY29yZDIiLCJtZXJnZVJlY29yZHMiLCJjdXJyZW50IiwidXBkYXRlcyIsInJlY29yZCIsImZvckVhY2giLCJncm91cGluZyJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsUUFBVCxFQUFtQkMsTUFBbkIsRUFBMkJDLEtBQTNCLFFBQXdDLGNBQXhDO0FBQ0EsT0FBTyxTQUFTQyxtQkFBVCxDQUE2QkMsUUFBN0IsRUFBdUM7QUFBQSxRQUNsQ0MsSUFEa0MsR0FDckJELFFBRHFCLENBQ2xDQyxJQURrQztBQUFBLFFBQzVCQyxFQUQ0QixHQUNyQkYsUUFEcUIsQ0FDNUJFLEVBRDRCOztBQUUxQyxXQUFPLEVBQUVELFVBQUYsRUFBUUMsTUFBUixFQUFQO0FBQ0g7QUFDRCxPQUFPLFNBQVNDLHFCQUFULENBQStCQyxPQUEvQixFQUF3Q0MsT0FBeEMsRUFBaUQ7QUFDcEQsV0FBT1IsT0FBT08sT0FBUCxLQUFtQlAsT0FBT1EsT0FBUCxDQUFuQixJQUFzQ1QsU0FBU1EsT0FBVCxLQUFxQlIsU0FBU1MsT0FBVCxDQUFyQixJQUEwQ0QsUUFBUUgsSUFBUixLQUFpQkksUUFBUUosSUFBbkUsSUFBMkVHLFFBQVFGLEVBQVIsS0FBZUcsUUFBUUgsRUFBL0k7QUFDSDtBQUNELE9BQU8sU0FBU0ksWUFBVCxDQUFzQkMsT0FBdEIsRUFBK0JDLE9BQS9CLEVBQXdDO0FBQzNDLFFBQUlELE9BQUosRUFBYTtBQUNULFlBQUlFLFNBQVNWLG9CQUFvQlEsT0FBcEIsQ0FBYjtBQUNBLFNBQUMsWUFBRCxFQUFlLE1BQWYsRUFBdUIsZUFBdkIsRUFBd0NHLE9BQXhDLENBQWdELG9CQUFZO0FBQ3hELGdCQUFJSCxRQUFRSSxRQUFSLEtBQXFCSCxRQUFRRyxRQUFSLENBQXpCLEVBQTRDO0FBQ3hDRix1QkFBT0UsUUFBUCxJQUFtQmIsTUFBTSxFQUFOLEVBQVVTLFFBQVFJLFFBQVIsQ0FBVixFQUE2QkgsUUFBUUcsUUFBUixDQUE3QixDQUFuQjtBQUNILGFBRkQsTUFFTyxJQUFJSixRQUFRSSxRQUFSLENBQUosRUFBdUI7QUFDMUJGLHVCQUFPRSxRQUFQLElBQW1CYixNQUFNLEVBQU4sRUFBVVMsUUFBUUksUUFBUixDQUFWLENBQW5CO0FBQ0gsYUFGTSxNQUVBLElBQUlILFFBQVFHLFFBQVIsQ0FBSixFQUF1QjtBQUMxQkYsdUJBQU9FLFFBQVAsSUFBbUJiLE1BQU0sRUFBTixFQUFVVSxRQUFRRyxRQUFSLENBQVYsQ0FBbkI7QUFDSDtBQUNKLFNBUkQ7QUFTQSxlQUFPRixNQUFQO0FBQ0gsS0FaRCxNQVlPO0FBQ0gsZUFBT0QsT0FBUDtBQUNIO0FBQ0oiLCJmaWxlIjoicmVjb3JkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNPYmplY3QsIGlzTm9uZSwgbWVyZ2UgfSBmcm9tICdAb3JiaXQvdXRpbHMnO1xuZXhwb3J0IGZ1bmN0aW9uIGNsb25lUmVjb3JkSWRlbnRpdHkoaWRlbnRpdHkpIHtcbiAgICBjb25zdCB7IHR5cGUsIGlkIH0gPSBpZGVudGl0eTtcbiAgICByZXR1cm4geyB0eXBlLCBpZCB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGVxdWFsUmVjb3JkSWRlbnRpdGllcyhyZWNvcmQxLCByZWNvcmQyKSB7XG4gICAgcmV0dXJuIGlzTm9uZShyZWNvcmQxKSAmJiBpc05vbmUocmVjb3JkMikgfHwgaXNPYmplY3QocmVjb3JkMSkgJiYgaXNPYmplY3QocmVjb3JkMikgJiYgcmVjb3JkMS50eXBlID09PSByZWNvcmQyLnR5cGUgJiYgcmVjb3JkMS5pZCA9PT0gcmVjb3JkMi5pZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZVJlY29yZHMoY3VycmVudCwgdXBkYXRlcykge1xuICAgIGlmIChjdXJyZW50KSB7XG4gICAgICAgIGxldCByZWNvcmQgPSBjbG9uZVJlY29yZElkZW50aXR5KGN1cnJlbnQpO1xuICAgICAgICBbJ2F0dHJpYnV0ZXMnLCAna2V5cycsICdyZWxhdGlvbnNoaXBzJ10uZm9yRWFjaChncm91cGluZyA9PiB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFtncm91cGluZ10gJiYgdXBkYXRlc1tncm91cGluZ10pIHtcbiAgICAgICAgICAgICAgICByZWNvcmRbZ3JvdXBpbmddID0gbWVyZ2Uoe30sIGN1cnJlbnRbZ3JvdXBpbmddLCB1cGRhdGVzW2dyb3VwaW5nXSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRbZ3JvdXBpbmddKSB7XG4gICAgICAgICAgICAgICAgcmVjb3JkW2dyb3VwaW5nXSA9IG1lcmdlKHt9LCBjdXJyZW50W2dyb3VwaW5nXSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHVwZGF0ZXNbZ3JvdXBpbmddKSB7XG4gICAgICAgICAgICAgICAgcmVjb3JkW2dyb3VwaW5nXSA9IG1lcmdlKHt9LCB1cGRhdGVzW2dyb3VwaW5nXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVjb3JkO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB1cGRhdGVzO1xuICAgIH1cbn0iXX0=